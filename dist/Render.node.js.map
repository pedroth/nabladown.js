{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Utils.js","webpack:///external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack:///external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack:///external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/esm/createClass\"","webpack:///external \"@babel/runtime/helpers/esm/inherits\"","webpack:///external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack:///./src/Render.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pair","a","b","left","right","stream","stringOrArray","array","next","slice","peek","hasNext","length","isEmpty","toString","map","JSON","stringify","join","filter","predicate","log","console","eatSymbol","symbolPredicate","Error","or","accError","rules","error","returnOne","listOfPredicates","defaultValue","createDefaultEl","input","evalScriptTag","scriptTag","globalEval","eval","srcUrl","attributes","textContent","fetch","then","code","text","Promise","re","_","innerText","asyncForEach","asyncLambdas","asyncLambda","isParagraph","domNode","constructor","document","createElement","require","render","tree","BaseRender","composeRender","prodClass","classes","forEach","cl","getOwnPropertyNames","x","k","listOfExpressions","this","renderProgram","body","e","appendChild","program","expression","renderExpression","listOfExpression","renderStatement","Statement","statement","Title","renderTitle","List","renderList","Seq","renderSeq","title","level","header","innerHTML","list","container","listItem","renderListItem","seqHTML","li","children","type","seq","renderAuxSeq","seqContainer","seqTypesDiv","renderSeqTypes","SeqTypes","seqDivArray","seqTypes","Text","renderText","Formula","renderFormula","Html","renderHtml","Code","renderCode","Link","renderLink","Media","renderMedia","Italic","renderItalic","Bold","renderBold","txt","italic","bold","anyBut","textArray","formula","equation","html","innerHtml","Array","from","getElementsByTagName","script","LineCode","renderLineCode","BlockCode","renderBlockCode","lineCode","blockCode","language","lang","codeTag","setAttribute","link","LinkStat","hyperlink","includes","childStatement","renderLinkStat","media","src","mediaElem","getMediaElementFromSrc","getVideoPredicateValue","getAudioPredicateValue","getImagePredicateValue","getEmbeddedPredicateValue","some","video","audio","img","frame","videoId","split","linkStat","renderAuxLinkStat","linkTypeDiv","renderLinkTypes","LinkType","linkStatDivArray","linkTypes","AnyBut","renderAnyBut","Single","renderSingle","single"],"mappings":"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","file":"Render.node.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","//========================================================================================\n/*                                                                                      *\n *                                         UTILS                                        *\n *                                                                                      */\n//========================================================================================\n\n/**\n * creates a pair pair: (a,b) => pair\n * @param {*} a left\n * @param {*} b right\n */\nexport function pair(a, b) {\n  return { left: a, right: b };\n}\n\n/**\n * creates a stream from a string, string => stream\n * @param {*} string\n */\nexport function stream(stringOrArray) {\n  // copy array or string to array\n  const array = [...stringOrArray];\n  return {\n    next: () => stream(array.slice(1)),\n    peek: () => array[0],\n    hasNext: () => array.length >= 1,\n    isEmpty: () => array.length === 0,\n    toString: () =>\n      array.map(s => (typeof s === \"string\" ? s : JSON.stringify(s))).join(\"\"),\n    filter: predicate => stream(array.filter(predicate)),\n    log: () => {\n      let s = stream(array);\n      while (s.hasNext()) {\n        console.log(s.peek());\n        s = s.next();\n      }\n    }\n  };\n}\n\nexport function eatSymbol(n, symbolPredicate) {\n  return function (stream) {\n    if (n === 0) return stream;\n    if (symbolPredicate(stream)) {\n      return eatSymbol(n - 1, symbolPredicate)(stream.next());\n    }\n    throw new Error(\n      `Caught error while eating ${n} symbols`,\n      stream.toString()\n    );\n  };\n}\n\n/**\n *  Select one rule\n * @param  {...any} rules\n */\nexport function or(...rules) {\n  let accError = null;\n  for (let i = 0; i < rules.length; i++) {\n    try {\n      return rules[i]();\n    } catch (error) {\n      accError = error;\n    }\n  }\n  throw accError;\n}\n\n/**\n * Returns a value based on the predicate\n * @param {*} listOfPredicates\n * @param {*} defaultValue\n */\nexport function returnOne(listOfPredicates, defaultValue = createDefaultEl()) {\n  return input => {\n    for (let i = 0; i < listOfPredicates.length; i++) {\n      if (listOfPredicates[i].predicate(input))\n        return listOfPredicates[i].value(input);\n    }\n    return defaultValue;\n  };\n}\n\nexport function evalScriptTag(scriptTag) {\n  const globalEval = eval;\n  const srcUrl = scriptTag?.attributes[\"src\"]?.textContent;\n  if (!!srcUrl) {\n    return fetch(srcUrl)\n      .then(code => code.text())\n      .then(code => {\n        globalEval(code);\n      });\n  } else {\n    return new Promise((re, _) => {\n      globalEval(scriptTag.innerText);\n      re(true);\n    });\n  }\n}\n\nexport async function asyncForEach(asyncLambdas) {\n  for (const asyncLambda of asyncLambdas) {\n    await asyncLambda();\n  }\n}\n\nexport function isParagraph(domNode) {\n  return domNode.constructor.name === \"HTMLParagraphElement\";\n}\n\nexport function createDefaultEl() {\n  return document.createElement(\"div\");\n}\n\nexport function bindAll(obj) {\n  Object.getOwnPropertyNames(Object.getPrototypeOf(obj))\n    .filter(prop => prop === \"constructor\")\n    .forEach(method => (obj[method] = obj[method].bind(obj)));\n}\n","module.exports = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","module.exports = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/esm/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/esm/createClass\");","module.exports = require(\"@babel/runtime/helpers/esm/inherits\");","module.exports = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","import {\n  asyncForEach,\n  evalScriptTag,\n  returnOne,\n  isParagraph,\n  or\n} from \"./Utils\";\n\n//========================================================================================\n/*                                                                                      *\n *                                        RENDER                                        *\n *                                                                                      */\n//========================================================================================\n\n/**\n * render: Abstract syntactic tree => HTML\n * @param {*} tree\n * @returns HTML object\n *\n */\nexport function render(tree) {\n  return new BaseRender().render(tree);\n}\n\nexport function composeRender(...classes) {\n  const prodClass = class extends BaseRender {};\n  classes.forEach(cl => {\n    Object.getOwnPropertyNames(cl.prototype)\n      .filter(x => x !== \"constructor\")\n      .forEach(k => {\n        prodClass.prototype[k] = cl.prototype[k];\n      });\n  });\n  return prodClass;\n}\n\nexport class BaseRender {\n  /**\n   * render: Abstract syntactic tree => HTML\n   * @param {*} tree\n   * @returns HTML object\n   *\n   */\n  render(tree) {\n    const listOfExpressions = this.renderProgram(tree);\n    const body = document.createElement(\"div\");\n    listOfExpressions.forEach(e => body.appendChild(e));\n    return body;\n  }\n\n  /**\n   *\n   * program => [HTML]\n   *\n   * @param {*} program\n   */\n  renderProgram(program) {\n    if (program.expression === null && program.program === null) return [];\n    const expression = this.renderExpression(program.expression);\n    const listOfExpression = this.renderProgram(program.program);\n    return [expression, ...listOfExpression];\n  }\n\n  /**\n   *\n   * expression => HTML\n   *\n   * @param {*} expression\n   */\n  renderExpression(expression) {\n    return this.renderStatement(expression.Statement);\n  }\n\n  /**\n   *\n   * statement => HTML\n   * @param {*} statement\n   */\n  renderStatement(statement) {\n    return returnOne([\n      { predicate: s => !!s.Title, value: s => this.renderTitle(s.Title) },\n      { predicate: s => !!s.List, value: s => this.renderList(s.List) },\n      { predicate: s => !!s.Seq, value: s => this.renderSeq(s.Seq) }\n    ])(statement);\n  }\n\n  /**\n   * title => HTML\n   * @param {*} title\n   */\n  renderTitle(title) {\n    const { level, Seq } = title;\n    const header = document.createElement(`h${level}`);\n    header.innerHTML = this.renderSeq(Seq).innerHTML;\n    return header;\n  }\n\n  /**\n   * list => HTML\n   * @param {*} list\n   */\n  renderList(list) {\n    const container = document.createElement(\"ul\");\n    const { list: arrayList } = list;\n    arrayList.map(listItem => {\n      container.innerHTML += this.renderListItem(listItem).innerHTML;\n    });\n    return container;\n  }\n\n  /**\n   * listItem => HTML\n   * @param {*} listItem\n   */\n  renderListItem(listItem) {\n    const container = document.createElement(\"div\");\n    const seqHTML = this.renderSeq(listItem.Seq);\n    const li = document.createElement(\"li\");\n    li.innerHTML += seqHTML.innerHTML;\n    container.appendChild(li);\n    if (listItem.children.length > 0) {\n      container.appendChild(\n        this.renderList({ type: \"list\", list: listItem.children })\n      );\n    }\n    return container;\n  }\n\n  /**\n   * seq => HTML\n   * @param {*} seq\n   */\n  renderSeq(seq) {\n    const container = document.createElement(\"p\");\n    const seqArray = this.renderAuxSeq(seq);\n    seqArray.forEach(seqContainer => {\n      if (isParagraph(seqContainer))\n        container.innerHTML += seqContainer.innerText;\n      else container.appendChild(seqContainer);\n    });\n    return container;\n  }\n\n  renderAuxSeq(seq) {\n    if (seq.isEmpty) return [];\n    const seqTypesDiv = this.renderSeqTypes(seq.SeqTypes);\n    const seqDivArray = this.renderAuxSeq(seq.Seq);\n    return [seqTypesDiv, ...seqDivArray];\n  }\n\n  /**\n   * seqTypes => HTML\n   *\n   * @param {*} seqTypes\n   */\n  renderSeqTypes(seqTypes) {\n    return returnOne([\n      { predicate: t => !!t.Text, value: t => this.renderText(t.Text) },\n      {\n        predicate: t => !!t.Formula,\n        value: t => this.renderFormula(t.Formula)\n      },\n      { predicate: t => !!t.Html, value: t => this.renderHtml(t.Html) },\n      { predicate: t => !!t.Code, value: t => this.renderCode(t.Code) },\n      { predicate: t => !!t.Link, value: t => this.renderLink(t.Link) },\n      { predicate: t => !!t.Media, value: t => this.renderMedia(t.Media) },\n      { predicate: t => !!t.Italic, value: t => this.renderItalic(t.Italic) },\n      { predicate: t => !!t.Bold, value: t => this.renderBold(t.Bold) }\n    ])(seqTypes);\n  }\n\n  /**\n   * text => HTML\n   * @param {*} text\n   */\n  renderText(text) {\n    const { text: txt } = text;\n    const container = document.createElement(\"p\");\n    container.innerHTML = txt;\n    return container;\n  }\n\n  /**\n   * italic => HTML\n   * @param {*} italic\n   */\n  renderItalic(italic) {\n    const { SeqTypes } = italic;\n    const container = document.createElement(\"em\");\n    container.innerHTML = this.renderSeqTypes(SeqTypes).innerHTML;\n    return container;\n  }\n\n  /**\n   * bold => HTML\n   * @param {*} bold\n   */\n  renderBold(bold) {\n    const { SeqTypes } = bold;\n    const container = document.createElement(\"strong\");\n    container.innerHTML = this.renderSeqTypes(SeqTypes).innerHTML;\n    return container;\n  }\n\n  /**\n   * anyBut => HTML\n   * @param {*} anyBut\n   */\n  renderAnyBut(anyBut) {\n    const { textArray } = anyBut;\n    const container = document.createElement(\"p\");\n    container.innerHTML = textArray.join(\"\");\n    return container;\n  }\n\n  /**\n   * formula => HTML\n   * @param {*} formula\n   */\n  renderFormula(formula) {\n    const { equation } = formula;\n    let container = document.createElement(\"span\");\n    container.innerHTML = equation;\n    return container;\n  }\n\n  /**\n   * html => HTML\n   * @param {*} html\n   */\n  renderHtml(html) {\n    const { html: innerHtml } = html;\n    const container = document.createElement(\"div\");\n    container.innerHTML = innerHtml;\n    const scripts = Array.from(container.getElementsByTagName(\"script\"));\n    const asyncLambdas = scripts.map(script => () => evalScriptTag(script));\n    asyncForEach(asyncLambdas);\n    return container;\n  }\n\n  /**\n   * code => HTML\n   * @param {*} code\n   */\n  renderCode(code) {\n    return returnOne([\n      {\n        predicate: c => !!c.LineCode,\n        value: c => this.renderLineCode(c.LineCode)\n      },\n      {\n        predicate: c => !!c.BlockCode,\n        value: c => this.renderBlockCode(c.BlockCode)\n      }\n    ])(code);\n  }\n\n  /**\n   * lineCode => HTML\n   * @param {*} lineCode\n   */\n  renderLineCode(lineCode) {\n    const { code } = lineCode;\n    const container = document.createElement(\"code\");\n    container.innerText = code;\n    return container;\n  }\n\n  /**\n   * blockCode => HTML\n   * @param {*} blockCode\n   */\n  renderBlockCode(blockCode) {\n    const { code, language } = blockCode;\n    const lang = language === \"\" ? \"plaintext\" : language;\n    const container = document.createElement(\"pre\");\n    const codeTag = document.createElement(\"code\");\n    codeTag.setAttribute(\"class\", `language-${lang}`);\n    codeTag.innerText = code;\n    container.appendChild(codeTag);\n    return container;\n  }\n  /**\n   * link => HTML\n   * @param {*} link\n   */\n  renderLink(link) {\n    const { LinkStat, link: hyperlink } = link;\n    const container = document.createElement(\"a\");\n    container.setAttribute(\"href\", hyperlink);\n    hyperlink.includes(\"http\") && container.setAttribute(\"target\", \"_blank\");\n    const childStatement = this.renderLinkStat(LinkStat);\n    container.appendChild(childStatement);\n    return container;\n  }\n  /**\n   * media => HTML\n   * @param {*} media\n   */\n  renderMedia(media) {\n    const { LinkStat, link: src } = media;\n    const container = document.createElement(\"div\");\n    container.setAttribute(\n      \"style\",\n      \"display: flex; flex-grow: 1; flex-direction: column\"\n    );\n    const mediaElem = this.getMediaElementFromSrc(src);\n    const childStatement = this.renderLinkStat(LinkStat);\n    container.appendChild(mediaElem);\n    container.appendChild(childStatement);\n    return container;\n  }\n\n  /**\n   * src:string => HTML\n   *\n   * @param {*} src\n   */\n  getMediaElementFromSrc(src) {\n    return returnOne([\n      this.getVideoPredicateValue(),\n      this.getAudioPredicateValue(),\n      this.getImagePredicateValue(),\n      this.getEmbeddedPredicateValue()\n    ])(src);\n  }\n\n  getVideoPredicateValue() {\n    return {\n      predicate: src => [\".mp4\", \".ogg\", \".avi\"].some(e => src.includes(e)),\n      value: src => {\n        const video = document.createElement(\"video\");\n        video.setAttribute(\"src\", src);\n        video.setAttribute(\"controls\", \"\");\n        return video;\n      }\n    };\n  }\n\n  getAudioPredicateValue() {\n    return {\n      predicate: src => [\".mp3\", \".ogg\", \".wav\"].some(e => src.includes(e)),\n      value: src => {\n        const audio = document.createElement(\"audio\");\n        audio.setAttribute(\"src\", src);\n        audio.setAttribute(\"controls\", \"\");\n        return audio;\n      }\n    };\n  }\n\n  getImagePredicateValue() {\n    return {\n      predicate: src =>\n        [\n          \".apng\",\n          \".avif\",\n          \".gif\",\n          \".jpg\",\n          \".jpeg\",\n          \".jfif\",\n          \".pjpeg\",\n          \".pjp\",\n          \".png\",\n          \".svg\",\n          \".webp\"\n        ].some(e => src.includes(e)),\n      value: src => {\n        const img = document.createElement(\"img\");\n        img.setAttribute(\"src\", src);\n        return img;\n      }\n    };\n  }\n\n  getEmbeddedPredicateValue() {\n    return {\n      predicate: src => [\".youtube.com\", \"youtu.be\"].some(e => src.includes(e)),\n      value: src => {\n        const frame = document.createElement(\"iframe\");\n        const videoId = or(\n          () => {\n            return src.split(\"v=\")[1].split(\"&\")[0];\n          },\n          () => {\n            return src.split(\".be/\")[1];\n          }\n        );\n        frame.setAttribute(\n          \"src\",\n          \"https://www.youtube-nocookie.com/embed/\" + videoId\n        );\n        frame.setAttribute(\"frameborder\", 0);\n        frame.setAttribute(\"height\", \"315\");\n        frame.setAttribute(\n          \"allow\",\n          \"fullscreen; clipboard-write; encrypted-media; picture-in-picture\"\n        );\n        return frame;\n      }\n    };\n  }\n\n  /**\n   * linkStat => HTML\n   * @param {*} linkStat\n   */\n  renderLinkStat(linkStat) {\n    const container = document.createElement(\"span\");\n    const seqArray = this.renderAuxLinkStat(linkStat);\n    seqArray.forEach(seqContainer => {\n      if (isParagraph(seqContainer))\n        container.innerHTML += seqContainer.innerText;\n      else container.appendChild(seqContainer);\n    });\n    return container;\n  }\n\n  renderAuxLinkStat(linkStat) {\n    if (linkStat.isEmpty) return [];\n    const linkTypeDiv = this.renderLinkTypes(linkStat.LinkType);\n    const linkStatDivArray = this.renderAuxLinkStat(linkStat.LinkStat);\n    return [linkTypeDiv, ...linkStatDivArray];\n  }\n\n  /**\n   * linkTypes => HTML\n   * @param {*} linkTypes\n   */\n  renderLinkTypes(linkTypes) {\n    return returnOne([\n      { predicate: l => !!l.AnyBut, value: l => this.renderAnyBut(l.AnyBut) },\n      {\n        predicate: l => !!l.Formula,\n        value: l => this.renderFormula(l.Formula)\n      },\n      { predicate: l => !!l.Code, value: l => this.renderCode(l.Code) },\n      { predicate: l => !!l.Html, value: l => this.renderHtml(l.Html) },\n      { predicate: l => !!l.Italic, value: l => this.renderItalic(l.Italic) },\n      { predicate: l => !!l.Bold, value: l => this.renderBold(l.Bold) },\n      { predicate: l => !!l.Single, value: l => this.renderSingle(l.Single) }\n    ])(linkTypes);\n  }\n\n  /**\n   * single => HTML\n   * @param {*} single\n   */\n  renderSingle(single) {\n    return this.renderText(single);\n  }\n}\n"],"sourceRoot":""}